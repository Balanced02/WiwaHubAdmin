{"version":3,"sources":["../server/app.js"],"names":["require","config","app","disable","mongoose","connect","process","env","db","err","console","error","exit","log","dotenv","configPath","NODE_ENV","use","skip","get","bodyParser","json","urlencoded","extended","origin","credentials","routes","req","res","next","Error","status","send","message"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;;;AAGAA,QAAQ,QAAR,EAAkBC,MAAlB;;AAEA,IAAMC,MAAM,wBAAZ;AACAA,IAAIC,OAAJ,CAAY,cAAZ;;AAEAC,mBAASC,OAAT,CACEC,QAAQC,GAAR,CAAYC,EADd,EAEE,eAAO;AACL,MAAIC,GAAJ,EAAS;AACPC,YAAQC,KAAR,CAAcF,GAAd;AACAH,YAAQM,IAAR,CAAa,CAAb;AACA;AACD;AACDF,UAAQG,GAAR,CAAY,kCAAZ;AACD,CATH;;AAYAC,iBAAOb,MAAP,CAAc;AACZc,cACET,QAAQC,GAAR,CAAYS,QAAZ,KAAyB,YAAzB,GAAwC,gBAAxC,GAA2D;AAFjD,CAAd;;AAKAd,IAAIe,GAAJ,CACE,sBAAO,KAAP,EAAc;AACZC,QAAM;AAAA,WAAMhB,IAAIiB,GAAJ,CAAQ,KAAR,MAAmB,MAAzB;AAAA;AADM,CAAd,CADF;AAKAjB,IAAIe,GAAJ,CAAQG,qBAAWC,IAAX,EAAR;AACAnB,IAAIe,GAAJ,CAAQG,qBAAWE,UAAX,CAAsB,EAAEC,UAAU,KAAZ,EAAtB,CAAR;AACArB,IAAIe,GAAJ,CACE,oBAAK;AACHO,UAAQ,8BADL;AAEH;AACAC,eAAa;AAHV,CAAL,CADF;;AAQA;AACAvB,IAAIe,GAAJ,CAAQ,GAAR,EAAaS,gBAAb;;AAEA;AACAxB,IAAIe,GAAJ,CAAQ,UAACU,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAC1B,MAAMpB,MAAM,IAAIqB,KAAJ,CAAU,WAAV,CAAZ;AACArB,MAAIsB,MAAJ,GAAa,GAAb;AACAF,OAAKpB,GAAL;AACD,CAJD;;AAMA;AACAP,IAAIe,GAAJ,CAAQ,UAACR,GAAD,EAAMkB,GAAN,EAAWC,GAAX,EAAgBC,IAAhB,EAAyB;AAC/B;AACAD,MAAIG,MAAJ,CAAWtB,IAAIsB,MAAJ,IAAc,GAAzB,EAA8BC,IAA9B,CAAmC;AACjCrB,WAAO,WAD0B;AAEjCsB,aAAS;AAFwB,GAAnC;AAID,CAND;;kBAQe/B,G","file":"app.js","sourcesContent":["import express from \"express\";\nimport logger from \"morgan\";\nimport bodyParser from \"body-parser\";\nimport mongoose from \"mongoose\";\nimport morgan from \"morgan\";\nimport dotenv from \"dotenv\";\nimport routes from \"./routes\";\nimport cors from \"cors\";\n\n\nrequire(\"dotenv\").config();\n\nconst app = express();\napp.disable(\"x-powered-by\");\n\nmongoose.connect(\n  process.env.db,\n  err => {\n    if (err) {\n      console.error(err);\n      process.exit(1);\n      return;\n    }\n    console.log(\"Database Connected Successfully!\");\n  }\n);\n\ndotenv.config({\n  configPath:\n    process.env.NODE_ENV === \"production\" ? \"../config/prod\" : \"../config/dev\"\n});\n\napp.use(\n  logger(\"dev\", {\n    skip: () => app.get(\"env\") === \"test\"\n  })\n);\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ extended: false }));\napp.use(\n  cors({\n    origin: \"http://wiwahub.herokuapp.com\",\n    // origin: \"http://localhost:3000\",\n    credentials: true\n  })\n);\n\n// Routes\napp.use(\"/\", routes);\n\n// Catch 404 and forward to error handler\napp.use((req, res, next) => {\n  const err = new Error(\"Not Found\");\n  err.status = 404;\n  next(err);\n});\n\n// Error handler\napp.use((err, req, res, next) => {\n  // eslint-disable-line no-unused-vars\n  res.status(err.status || 500).send({\n    error: \"Error 500\",\n    message: \"Error getting requested url\"\n  });\n});\n\nexport default app;\n"]}